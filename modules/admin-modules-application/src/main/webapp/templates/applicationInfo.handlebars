{{!--
/**
 * Copyright (c) Codice Foundation
 *
 * This is free software: you can redistribute it and/or modify it under the terms of the GNU Lesser General Public License as published by the Free Software Foundation, either
 * version 3 of the License, or any later version.
 *
 * This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
 * See the GNU Lesser General Public License for more details. A copy of the GNU Lesser General Public License is distributed along with this program and can be found at
 * <http://www.gnu.org/licenses/lgpl.html>.
 *
 **/
 --}}

<div class="app-card panel panel-primary">
    <div class="panel-body">
        <!-- card overlay buttons -->
        {{#is isDisabled false}}
            <div class="card-overlay bottom visible-in-edit-mode">
                <div class="block">
                    <div class="centered">
                        {{#is state 'ACTIVE'}}
                            <i href="#{{appId}}-stopModal" data-toggle="modal" class="fa fa-stop fa-4x" title="Click to stop this application"></i>
                        {{/is}}
                        {{#is state 'INACTIVE'}}
                            <i href="#{{appId}}-startModal" data-toggle="modal" class="fa fa-play fa-4x in" title="Click to start this application"></i>
                        {{/is}}
                    </div>
                </div>
            </div>
        {{/is}}
        <div class="card-overlay right hide-in-edit-mode">
            <div class="block">
                <div class="centered">
                    <i class="fa fa-chevron-right fa-4x select-application"></i>
                </div>
            </div>
        </div>

        <!-- card contents -->
        <div class="name-version-container">
            <div class="name">
                <span>{{displayName}}</span>
            </div>
            <div class="version">
                <i class="fa fa-code-fork fa-2x vertical-align-middle"></i>
                <span class="vertical-align-middle">{{version}}</span>
            </div>
        </div>
        <hr class="list-hidden"/>
        <div class="description boxDescription rowDescription ellipsis">
            <div>
                {{#if paragraphs}}
                    {{#join paragraphs "<br/>"}}
                        <span>{{.}}</span>
                    {{/join}}
                {{else}}
                    <span>{{description}}</span>
                {{/if}}
            </div>
        </div>
        <div class="badges">
            {{#if dependencies}}
                <div data-toggle="tooltip" data-placement="top" title="This application has {{dependencies.length}} sub applciations.">
                    <span class="badge badge-info">{{dependencies.length}}</span> <i class="fa fa-sitemap"></i>
                </div>
            {{/if}}
        </div>
    </div>

    <!-- Modals -->
    <!--<a href="#{{appId}}-descriptionModal" class="btn btn-primary btn-sm descriptionButton" data-toggle="modal">More</a>-->
    <!--{{#is isDisabled false}}<a href="#{{appId}}-installModal" class="fa fa-download installApp installHide" data-toggle="modal"></a>{{/is}}-->
    <!--{{#is isDisabled false}}<a href="#{{appId}}-removeModal" class="fa fa-times removeApp removeHide" data-toggle="modal"></a>{{/is}}-->
    <!--{{#is isDisabled false}}<a href="#{{appId}}-stopModal" class="fa fa-times stopApp stopAppHide" data-toggle="modal"></a>{{/is}}-->
    <!--<a href="#{{appId}}-startModal" class="fa fa-download startApp startAppHide" data-toggle="modal"></a>-->
    <div id="{{appId}}-stopModal" class="modal" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                    <h4 class="modal-title">Stop Application - {{displayName}}</h4>
                </div>
                <div class="modal-body">
                    {{#if removeMessage}}
                        Stopping {{displayName}} will also stop the following apps:<br><br>
                        {{#each removeMessage}}
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{this}}<br>
                        {{/each}}
                        <br>Do you want to stop all the apps listed above?<br>
                    {{else}}
                        Stop {{displayName}}?<br>
                    {{/if}}
                </div>
                <div class="modal-footer">
                    <div class="btn-group">
                        <button type="button" class="btn btn-primary stopAppConfirm" data-dismiss="modal" aria-hidden="true">Confirm</button>
                        <button type="button" class="btn btn-default stopAppCancel" data-dismiss="modal" aria-hidden="true">Cancel</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="{{appId}}-startModal" class="modal" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                    <h4 class="modal-title">Start Application - {{displayName}}</h4>
                </div>
                <div class="modal-body">
                    {{#if installMessage}}
                        Starting {{displayName}} requires the following apps to be started:<br><br>
                        {{#each installMessage}}
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{this}}<br>
                        {{/each}}
                        <br>Do you want to start all the apps listed above?<br>
                    {{else}}
                        Start {{displayName}}?<br>
                    {{/if}}
                </div>
                <div class="modal-footer">
                    <div class="btn-group">
                        <button type="button" class="btn btn-primary startAppConfirm" data-dismiss="modal" aria-hidden="true">Confirm</button>
                        <button type="button" class="btn btn-default startAppCancel" data-dismiss="modal" aria-hidden="true">Cancel</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="{{appId}}-descriptionModal" class="modal" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                    <h4>Application Description:</h4>
                    <h6>{{description}}</h6>
                </div>
            </div>
        </div>
    </div>
</div>